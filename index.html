<!DOCTYPE html>
<html lang="en">
<head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Metrix SDK HTML</title>
    <meta name="description" content="Generated by create next app">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/mvp.css">
    <script src="https://box.backtory.com/metricx/sdk/web/metrix.umd-1.5.3.js" ></script>
    <style>
        button:active {
            background: red;
        }
    </style>
</head>
<body>
<main>
    <div>
        <h3>App ID:</h3>
        <input id="init-appid-input" placeholder="App ID">
        <h3>API Key:</h3>
        <input id="init-apikey-input" placeholder="API KEY">
        <button id="init-button">Init</button>
        <button id="close-button">Close</button>
        <p id="init-status" style="color: red;">Not initialized</p>
    </div>
    <div id="send-event-box" hidden>
        <hr/>
        <div>
            <h3>Enter Your username:</h3>
            <input id="login-input" placeholder="customer@mycompany.com">
            <button id="login-button">Login</button>
            <button id="logout-button">Logout</button>
            <p id="login-status" style="color: red">Your Anonymous!!!</p>
        </div>
        <input type="checkbox" id="show-user-send" name="vehicle1">
        <label for="show-user-send">
            <h4>I want to update user</h4>
        </label>
        <div id="send-user-box" hidden>
            <h3>Send sample user attribute</h3>
            <h5>Attributes:</h5>
            <div style="display: flex; justify-content: space-between"><label for="first-name-input">First
                Name:</label><input id="first-name-input" placeholder="First Name"></div>
            <div style="display: flex; justify-content: space-between"><label for="last-name-input">Last Name:</label><input
                    id="last-name-input" placeholder="Last Name"></div>
            <div style="display: flex; justify-content: space-between"><label for="phone-input">Phone Number:</label><input
                    id="phone-input" placeholder="Phone Number"></div>
            <div style="display: flex; justify-content: space-between"><label for="phone-input">Email:</label><input
                    id="email-input" placeholder="Email"></div>
            <h5>Custom Attributes:</h5>
            <div style="display: flex; justify-content: space-between">
                <label for="user-c-att-key-input">Key:</label><input id="user-c-att-key-input" placeholder="key">
                <label for="user-c-att-value-input">Value:</label><input id="user-c-att-value-input" placeholder="value">
            </div>
            <div style="display: flex; justify-content: space-between">
                <label for="user-c-att-key2-input">Key:</label><input id="user-c-att-key2-input" placeholder="key">
                <label for="user-c-att-value2-input">Value:</label><input id="user-c-att-value2-input" placeholder="value">
            </div>
            <button id="user-att-button">Send User</button>
        </div>
        <div id="event-box" hidden>
            <hr/>
            <div style="margin-top: 100px">
                <h3>Send
                    <span style="color: red; font-weight: bold">Page View</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="page-view-event-c-att-key-input">Key:</label><input id="page-view-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="page-view-event-c-att-value-input">Value:</label><input id="page-view-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="page-view-event-c-att-key2-input">Key:</label><input id="page-view-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="page-view-event-c-att-value2-input">Value:</label><input id="page-view-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="page-view-event-button">Send <span style="color: yellowgreen; font-weight: bold">Page View</span></button>
            </div>
            <div style="margin-top: 100px; text-align: end">
                <h3>Send
                    <span style="color: red; font-weight: bold">Select Item</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="select-item-event-c-att-key-input">Key:</label><input id="select-item-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="select-item-event-c-att-value-input">Value:</label><input id="select-item-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="select-item-event-c-att-key2-input">Key:</label><input id="select-item-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="select-item-event-c-att-value2-input">Value:</label><input id="select-item-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="select-item-event-button">Send <span style="color: yellowgreen; font-weight: bold">Select Item</span></button>
            </div>
            <hr />
            <div style="margin-top: 100px">
                <h3>Send
                    <span style="color: red; font-weight: bold">View Item</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="view-item-event-c-att-key-input">Key:</label><input id="view-item-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="view-item-event-c-att-value-input">Value:</label><input id="view-item-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="view-item-event-c-att-key2-input">Key:</label><input id="view-item-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="view-item-event-c-att-value2-input">Value:</label><input id="view-item-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="view-item-event-button">Send <span style="color: yellowgreen; font-weight: bold">View Item</span></button>
            </div>
            <hr />
            <div style="margin-top: 100px; text-align: end">
                <h3>Send
                    <span style="color: red; font-weight: bold">Add To Cart</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="add-to-cart-event-c-att-key-input">Key:</label><input id="add-to-cart-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="add-to-cart-event-c-att-value-input">Value:</label><input id="add-to-cart-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="add-to-cart-event-c-att-key2-input">Key:</label><input id="add-to-cart-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="add-to-cart-event-c-att-value2-input">Value:</label><input id="add-to-cart-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="add-to-cart-event-button">Send <span style="color: yellowgreen; font-weight: bold">Add To Cart</span></button>
            </div>
            <hr />
            <div style="margin-top: 100px">
                <h3>Send
                    <span style="color: red; font-weight: bold">Register User</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="register-user-event-c-att-key-input">Key:</label><input id="register-user-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="register-user-event-c-att-value-input">Value:</label><input id="register-user-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="register-user-event-c-att-key2-input">Key:</label><input id="register-user-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="register-user-event-c-att-value2-input">Value:</label><input id="register-user-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="register-user-event-button">Send <span style="color: yellowgreen; font-weight: bold">Register User</span></button>
            </div>
            <hr />
            <div style="margin-top: 100px; text-align: end">
                <h3>Send
                    <span style="color: red; font-weight: bold">View Cart</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="view-cart-event-c-att-key-input">Key:</label><input id="view-cart-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="view-cart-event-c-att-value-input">Value:</label><input id="view-cart-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="view-cart-event-c-att-key2-input">Key:</label><input id="view-cart-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="view-cart-event-c-att-value2-input">Value:</label><input id="view-cart-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="view-cart-event-button">Send <span style="color: yellowgreen; font-weight: bold">View Cart</span></button>
            </div>
            <hr />
            <div style="margin-top: 100px">
                <h3>Send
                    <span style="color: red; font-weight: bold">Add Shipion Info</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="shipion-event-c-att-key-input">Key:</label><input id="shipion-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="shipion-event-c-att-value-input">Value:</label><input id="shipion-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="shipion-event-c-att-key2-input">Key:</label><input id="shipion-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="shipion-event-c-att-value2-input">Value:</label><input id="shipion-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="shipion-event-button">Send <span style="color: yellowgreen; font-weight: bold">Add Shipion Info</span></button>
            </div>
            <hr />
            <div style="margin-top: 100px; text-align: end">
                <h3>Send
                    <span style="color: red; font-weight: bold">Add Payment Info</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="add-payment-info-event-c-att-key-input">Key:</label><input id="add-payment-info-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="add-payment-info-event-c-att-value-input">Value:</label><input id="add-payment-info-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="add-payment-info-event-c-att-key2-input">Key:</label><input id="add-payment-info-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="add-payment-info-event-c-att-value2-input">Value:</label><input id="add-payment-info-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="add-payment-info-event-button">Send <span style="color: yellowgreen; font-weight: bold">Add Payment Info</span></button>
            </div>
            <hr />
            <div style="margin-top: 100px">
                <h3>Send
                    <span style="color: red; font-weight: bold">Act To Payment</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="act-to-payment-info-event-c-att-key-input">Key:</label><input id="act-to-payment-info-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="act-to-payment-info-event-c-att-value-input">Value:</label><input id="act-to-payment-info-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="act-to-payment-info-event-c-att-key2-input">Key:</label><input id="act-to-payment-info-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="act-to-payment-info-event-c-att-value2-input">Value:</label><input id="act-to-payment-info-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="act-to-payment-info-event-button">Send <span style="color: yellowgreen; font-weight: bold">Act To Payment</span></button>
            </div>
            <hr />
            <div style="margin-top: 100px; text-align: end">
                <h3>Send
                    <span style="color: red; font-weight: bold">Final Purchase</span>
                    event with custom attribute:</h3>
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="final-purchase-event-c-att-key-input">Key:</label><input id="final-purchase-event-c-att-key-input" placeholder="key">-->
                <!--            <label for="final-purchase-event-c-att-value-input">Value:</label><input id="final-purchase-event-c-att-value-input" placeholder="value">-->
                <!--        </div>-->
                <!--        <div style="display: flex; justify-content: space-between">-->
                <!--            <label for="final-purchase-event-c-att-key2-input">Key:</label><input id="final-purchase-event-c-att-key2-input" placeholder="key">-->
                <!--            <label for="final-purchase-event-c-att-value2-input">Value:</label><input id="final-purchase-event-c-att-value2-input" placeholder="value">-->
                <!--        </div>-->
                <button id="final-purchase-event-button">Send <span style="color: yellowgreen; font-weight: bold;">Final Purchase</span></button>
            </div>
        </div>
    </div>

    <script>

        let username = localStorage.getItem("username");
        const appId = localStorage.getItem('appId');
        const apiKey = localStorage.getItem('apiKey');
        const PUSH_PUBLIC_KEY = "BG_VbzDyu8W8ROIaSVgcE0EDFIPrwewnb3jTfat5jKjedyFv3UJGWdaPzwA7585-qH_0AAW975ldKa2O1D8kffU"
        const config = {
            push: {
                enabled : true, // defaults to false but if set to true you must provide publicKey.
                publicKey: PUSH_PUBLIC_KEY, // your push subscription public key.
                showBell: true
            }
        }

        if (appId && apiKey) {
            Metrix.init(appId, apiKey, config);
            document.getElementById('init-appid-input').value = appId;
            document.getElementById('init-apikey-input').value = apiKey;
            document.getElementById('init-status').innerText = 'Metrix initialized';
            document.getElementById('init-status').style.color = 'green'
            document.getElementById('send-event-box').removeAttribute('hidden');
            document.getElementById('init-button').disabled = true;
        }

        if (username) {
            document.getElementById("login-status").innerHTML = "You're logged in as: " + username;
            document.getElementById("login-status").style.color = 'green';
            document.getElementById("login-button").disabled = true
            username = document.getElementById("login-input").value = username;
            document.getElementById('event-box').removeAttribute('hidden')
            Metrix.authorizeUser(username)
        }

        document.getElementById('init-button').onclick = () => {
            const appId = document.getElementById('init-appid-input').value;
            const apiKey = document.getElementById('init-apikey-input').value;
            if (appId.length && apiKey.length) {
                localStorage.setItem('appId', appId);
                localStorage.setItem('apiKey', apiKey);
                document.getElementById('init-status').innerText = 'Metrix initialized';
                document.getElementById('init-status').style.color = 'green'
                Metrix.init(appId, apiKey, config);
                document.getElementById('send-event-box').removeAttribute('hidden')
            }
        }

        document.getElementById('close-button').onclick = () => {
            localStorage.removeItem('appId');
            localStorage.removeItem('apiKey');
            localStorage.removeItem("username")
            window.location.reload();
        }

        document.getElementById("login-button").onclick = () => {
            username = document.getElementById("login-input").value;
            if (username.length) {
                localStorage.setItem("username", username)
                Metrix.authorizeUser(username)
                Metrix.setEmail(username)
                document.getElementById("login-status").innerHTML = "You're logged in as: " + username;
                document.getElementById("login-status").style.color = 'green';
                document.getElementById('event-box').removeAttribute('hidden')
            }
        }

        document.getElementById("logout-button").onclick = () => {
            username = undefined
            localStorage.removeItem("username")
            Metrix.authorizeUser(username)
            document.getElementById("login-button").disabled = false;
            document.getElementById('login-input').value = '';
            document.getElementById("login-status").innerHTML = "You're logged out!!!"
            document.getElementById("login-status").style.color = "red";
            document.getElementById('event-box').setAttribute('hidden', '')

        }

        document.getElementById('show-user-send').onchange = (e) => {
            const checked = e.target.checked;
            const userSendBox = document.getElementById('send-user-box')
            if (checked) {
                userSendBox.removeAttribute('hidden')
            } else {
                userSendBox.setAttribute('hidden', '')
            }
        }

        document.getElementById("user-att-button").onclick = () => {
            const firstname = document.getElementById("first-name-input").value;
            const lastname = document.getElementById("last-name-input").value;
            const phone = document.getElementById("phone-input").value;
            const email = document.getElementById("email-input").value;
            const key = document.getElementById("user-c-att-key-input").value;
            const value = document.getElementById("user-c-att-value-input").value;
            const key2 = document.getElementById("user-c-att-key2-input").value;
            const value2 = document.getElementById("user-c-att-value2-input").value;

            if (firstname)
                Metrix.setFirstName(firstname)

            if (lastname)
                Metrix.setLastName(lastname)

            if (phone)
                Metrix.setPhoneNumber(phone)

            if (email)
                Metrix.setEmail(email)

            if (key && value)
                Metrix.setCustomAttribute(key, value)
            if (key2 && value2)
                Metrix.setCustomAttribute(key2, value2)

        }

        document.getElementById("page-view-event-button").onclick = () => {
            const key = document.getElementById("page-view-event-c-att-key-input").value;
            const value = document.getElementById("page-view-event-c-att-value-input").value;
            const key2 = document.getElementById("page-view-event-c-att-key2-input").value;
            const value2 = document.getElementById("page-view-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('atqha', attributes);

        }

        document.getElementById("select-item-event-button").onclick = () => {
            const key = document.getElementById("select-item-event-c-att-key-input").value;
            const value = document.getElementById("select-item-event-c-att-value-input").value;
            const key2 = document.getElementById("select-item-event-c-att-key2-input").value;
            const value2 = document.getElementById("select-item-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('zstnn', attributes);

        }

        document.getElementById("view-item-event-button").onclick = () => {
            const key = document.getElementById("view-item-event-c-att-key-input").value;
            const value = document.getElementById("view-item-event-c-att-value-input").value;
            const key2 = document.getElementById("view-item-event-c-att-key2-input").value;
            const value2 = document.getElementById("view-item-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('iwotv', attributes);

        }

        document.getElementById("register-user-event-button").onclick = () => {
            const key = document.getElementById("register-user-event-c-att-key-input").value;
            const value = document.getElementById("register-user-event-c-att-value-input").value;
            const key2 = document.getElementById("register-user-event-c-att-key2-input").value;
            const value2 = document.getElementById("register-user-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('febni', attributes);
        }

        document.getElementById("view-cart-event-button").onclick = () => {
            const key = document.getElementById("view-cart-event-c-att-key-input").value;
            const value = document.getElementById("view-cart-event-c-att-value-input").value;
            const key2 = document.getElementById("view-cart-event-c-att-key2-input").value;
            const value2 = document.getElementById("view-cart-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('npduc', attributes);
        }


        document.getElementById("shipion-event-button").onclick = () => {
            const key = document.getElementById("shipion-event-c-att-key-input").value;
            const value = document.getElementById("shipion-event-c-att-value-input").value;
            const key2 = document.getElementById("shipion-event-c-att-key2-input").value;
            const value2 = document.getElementById("shipion-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('kbjqc', attributes);
        }

        document.getElementById("add-payment-info-event-button").onclick = () => {
            const key = document.getElementById("add-payment-info-event-c-att-key-input").value;
            const value = document.getElementById("add-payment-info-event-c-att-value-input").value;
            const key2 = document.getElementById("add-payment-info-event-c-att-key2-input").value;
            const value2 = document.getElementById("add-payment-info-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('vbste', attributes);
        }

        document.getElementById("act-to-payment-info-event-button").onclick = () => {
            const key = document.getElementById("act-to-payment-info-event-c-att-key-input").value;
            const value = document.getElementById("act-to-payment-info-event-c-att-value-input").value;
            const key2 = document.getElementById("act-to-payment-info-event-c-att-key2-input").value;
            const value2 = document.getElementById("act-to-payment-info-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('ayarh', attributes);
        }

        document.getElementById("final-purchase-event-button").onclick = () => {
            const key = document.getElementById("final-purchase-event-c-att-key-input").value;
            const value = document.getElementById("final-purchase-event-c-att-value-input").value;
            const key2 = document.getElementById("final-purchase-event-c-att-key2-input").value;
            const value2 = document.getElementById("final-purchase-event-c-att-value2-input").value;

            const attributes = {};
            if (key && value)
                attributes[key] = value;
            if (key2 && value2)
                attributes[key2] = value2;

            Metrix.newEvent('xqqzf', attributes);
        }

    </script>
</main>
</body>
</html>
